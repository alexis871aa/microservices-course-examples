# Workspace для микросервисов

Данный workspace демонстрирует структуру проекта с несколькими микросервисами, использующими общие спецификации API.

## Модули

Workspace состоит из нескольких модулей:

1. **grpc** - модуль с gRPC сервером, реализующим API для работы с наблюдениями НЛО:
   - Полная реализация CRUD операций
   - Использование Protocol Buffers для определения API
   - Работа с UUID, Timestamp и Nullable полями

2. **http** - модуль с HTTP сервером на базе Chi и Ogen, реализующий API для работы с данными о погоде:
   - REST API для работы с данными о погоде
   - Автоматическая генерация кода из OpenAPI спецификации
   - Типизированные обработчики благодаря Ogen

3. **shared** - общие компоненты, используемые обоими модулями:
   - `proto` - Protocol Buffers спецификации для gRPC API
   - `api` - OpenAPI спецификации для HTTP API

## Преимущества структуры рабочего пространства

1. **Модульность**: каждый сервис развивается в своем модуле
2. **Переиспользование кода**: общие компоненты выделены в отдельный модуль
3. **Консистентность API**: спецификации API хранятся в одном месте
4. **Удобство разработки**: можно работать с несколькими сервисами в рамках одного рабочего пространства
5. **Совместимость версий**: проще контролировать совместимость между модулями

## Генерация кода

Для генерации кода из Protocol Buffers и OpenAPI спецификаций используется [Task](https://taskfile.dev/):

```bash
# Установка Task (если не установлен)
go install github.com/go-task/task/v3/cmd/task@latest

# Генерация всего кода
task gen

# Запуск линтера для обоих модулей
task lint

# Форматирование кода
task format
```

## Запуск серверов

### gRPC сервер

```bash
cd grpc
go run cmd/server/main.go
```

gRPC сервер будет доступен на порту 5051.

### HTTP сервер

```bash
cd http
go run cmd/server/main.go
```

HTTP сервер будет доступен на порту 8080.


## Дополнительные ресурсы

- [gRPC документация](https://grpc.io/docs/)
- [Protocol Buffers](https://developers.google.com/protocol-buffers)
- [OpenAPI спецификация](https://spec.openapis.org/oas/latest.html)
- [Chi роутер](https://github.com/go-chi/chi)
- [Ogen генератор](https://github.com/ogen-go/ogen) 